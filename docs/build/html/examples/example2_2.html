


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Use Dynamically Normalized Objective Function &mdash; opdelft 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/jquery.fancybox.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/glpi.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="opdelft 0.0.1 documentation" href="../index.html"/>
        <link rel="up" title="Calibrate Delft-FLOW Problem with DYCORS in Parallel" href="example2.html"/>
        <link rel="next" title="Optimize Delft-FLOW with Parallel DE" href="example3.html"/>
        <link rel="prev" title="Single Objective Problem" href="example2_1.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> opdelft
          

          
          </a>

          
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install opdelft</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="example1.html">Calibrate Delft3D-FLOW Problem with DYCORS in serial</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="example2.html">Calibrate Delft-FLOW Problem with DYCORS in Parallel</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="example2_1.html">Single Objective Problem</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Use Dynamically Normalized Objective Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="example3.html">Optimize Delft-FLOW with Parallel DE</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">opdelft</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Examples</a> &raquo;</li>
        
          <li><a href="example2.html">Calibrate Delft-FLOW Problem with DYCORS in Parallel</a> &raquo;</li>
        
      <li>Use Dynamically Normalized Objective Function</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/examples/example2_2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="example3.html" class="btn btn-neutral float-right" title="Optimize Delft-FLOW with Parallel DE" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="example2_1.html" class="btn btn-neutral" title="Single Objective Problem" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="use-dynamically-normalized-objective-function">
<h1>Use Dynamically Normalized Objective Function<a class="headerlink" href="#use-dynamically-normalized-objective-function" title="Permalink to this headline">Â¶</a></h1>
<p>This is an demo to use the DYCORS in parallel for the calibraiton of the Delft3D problem with Dynamically Normalized Function. The experiment setting of the algorithm is the same with example in <a class="reference internal" href="example2_1.html#example2-1"><span class="std std-ref">Single Objective Problem</span></a> case. user need to set the function class.</p>
<p>We use the example of delft3d_2objs() is the real_functions.py file under the problem folder as an example.</p>
<p>The example present here is a 2 objective calibration problem. So user need to set the variable self.no_sub_objs to 2.</p>
<p>At the end of the objection() funciton. the 2 objetive funciton value sub_obj1 and sub_obj2 should be appended into a 2-element list which will be send back to the main algorithm.</p>
<p>For cause that have more than 2 objectives. The setting is similar with the 2 objectives case.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">class</span> <span class="nc">delft3d_2objs</span><span class="p">:</span>
<span class="c1">#  Global optimum: f(0,0,...,0)=0</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="c1"># PREPARE INPUT FILE  [Vicouv, Dicouv, Vicoww, Dicoww]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">xlow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">xup</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="n">dim</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; Ansoulate error function </span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
                <span class="s2">&quot;Global optimum: f(0,0,...,0) = 0&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">integer</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">continuous</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dim</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">runid</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">simlen</span> <span class="o">=</span> <span class="mi">365</span>  <span class="c1"># the simlutation length unit /day</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exp_iteration</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># The number of iteration to finish the initial experimental design</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exp_simid</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">no_sub_objs</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">home_dir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<span class="k">def</span> <span class="nf">objfunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">simid</span><span class="p">,</span> <span class="n">iterid</span><span class="p">):</span>
    <span class="n">simid</span> <span class="o">=</span> <span class="n">simid</span>
    <span class="n">iterid</span> <span class="o">=</span> <span class="n">iterid</span>
    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;current folder&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">home_dir</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Dimension mismatch&#39;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;The </span><span class="si">%d</span><span class="s1"> iteration </span><span class="si">%d</span><span class="s1"> simulation called objfunction&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">iterid</span><span class="p">,</span> <span class="n">simid</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">iterid</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_iteration</span> <span class="o">&amp;</span> <span class="n">iterid</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; The part of code only take effect when the number of iterations to</span>
<span class="sd">        finish the initial experimental desgin larger than 1&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="n">simid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_simid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exp_simid</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">sub_objs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">delft3d_flow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">simid</span><span class="p">,</span> <span class="n">iterid</span><span class="p">)</span>
    <span class="n">parms</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">home_dir</span> <span class="o">+</span> <span class="s2">&quot;/result/pysot_result.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="se">\t</span><span class="si">%s</span><span class="se">\t</span><span class="si">%s</span><span class="se">\t</span><span class="s2">@</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">iterid</span><span class="p">,</span> <span class="n">simid</span><span class="p">,</span> <span class="n">sub_objs</span><span class="p">,</span> <span class="n">parms</span><span class="p">))</span>
    <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">iterid</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp_iteration</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exp_simid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">simid</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sub_objs</span>

    <span class="k">def</span> <span class="nf">delft3d_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">simid</span><span class="p">,</span> <span class="n">iterid</span><span class="p">):</span>
    <span class="n">simid</span> <span class="o">=</span> <span class="n">simid</span>
    <span class="n">iterid</span> <span class="o">=</span> <span class="n">iterid</span>
    <span class="n">workingdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">home_dir</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">simid</span><span class="p">)</span>

    <span class="c1"># ====================================Coefficient file modification====================================#</span>
    <span class="sd">&quot;&quot;&quot; This section is for the model simulation file modification based on the proposed paramter vecor x.</span>
<span class="sd">    A simple example of modify 4 parameters [Vicouv, Dicouv, Vicoww, Dicoww] for the coefficient file f34.mdf</span>
<span class="sd">     is shown inside the modify_coefficient() function &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">modify_coefficient</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">simid</span><span class="p">,</span> <span class="n">iterid</span><span class="p">)</span>

    <span class="c1"># ====================================running simulation====================================#</span>
    <span class="sd">&quot;&quot;&quot; This section to launch the simulation. The code shown here is running the delft3d under Linux &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
       <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;./run_flow2d3d.sh&#39;</span>
       <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="n">workingdir</span><span class="p">)</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">exc_traceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exception</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">exc_traceback</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Trackback Error:</span><span class="si">%d</span><span class="s2"> iteration </span><span class="si">%d</span><span class="s2"> evaluation&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">iterid</span><span class="p">,</span> <span class="n">simid</span><span class="p">))</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> iteration </span><span class="si">%s</span><span class="s1"> evaluation: finished simulation&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">iterid</span><span class="p">,</span> <span class="n">simid</span><span class="p">))</span>

        <span class="c1"># ====================================post analysis of the result file====================================#</span>
        <span class="sd">&quot;&quot;&quot; convert the NEFIS format history file *.dat *.def into DAT format file *dat.</span>
<span class="sd">        The example shown here is using vs tool inside Delft3D suit convert nefis file to dat file under linux.</span>
<span class="sd">        Users might need to modify the &quot;his2dat.sh&quot; file when work their own problem&quot;&quot;&quot;</span>
        <span class="n">cmd2</span> <span class="o">=</span> <span class="s1">&#39;./his2dat.sh&#39;</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">cmd2</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="n">workingdir</span><span class="p">)</span>  <span class="c1"># convert the histroy file to python readable dat file</span>

        <span class="sd">&quot;&quot;&quot; read the observation data and simulation result. An example that reading the velocity at sataion 1 layer 1&quot;&quot;&quot;</span>

        <span class="n">objfunc</span> <span class="o">=</span> <span class="n">Metrics</span><span class="p">()</span>
        <span class="n">postutil</span> <span class="o">=</span> <span class="n">Postprocessing</span><span class="p">()</span>
        <span class="n">observation_curu</span> <span class="o">=</span> <span class="n">workingdir</span> <span class="o">+</span> <span class="s2">&quot;/ZCURU_measured.dat&quot;</span>
        <span class="n">observation_curv</span> <span class="o">=</span> <span class="n">workingdir</span> <span class="o">+</span> <span class="s2">&quot;/ZCURV_measured.dat&quot;</span>
        <span class="n">observation_curw</span> <span class="o">=</span> <span class="n">workingdir</span> <span class="o">+</span> <span class="s2">&quot;/ZCURW_measured.dat&quot;</span>
        <span class="n">sim_curu</span> <span class="o">=</span> <span class="n">workingdir</span> <span class="o">+</span> <span class="s2">&quot;/ZCURU.dat&quot;</span>
        <span class="n">sim_curv</span> <span class="o">=</span> <span class="n">workingdir</span> <span class="o">+</span> <span class="s2">&quot;/ZCURV.dat&quot;</span>
        <span class="n">sim_curw</span> <span class="o">=</span> <span class="n">workingdir</span> <span class="o">+</span> <span class="s2">&quot;/ZCURW.dat&quot;</span>

        <span class="n">observation_curu_layer1</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">observation_curu</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">observation_curv_layer1</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">observation_curv</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">observation_curw_layer1</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">observation_curw</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sim_curu_layer1</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">sim_curu</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sim_curv_layer1</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">sim_curv</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sim_curw_layer1</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">sim_curw</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">fn_layer1</span> <span class="o">=</span> <span class="n">objfunc</span><span class="o">.</span><span class="n">fouriernorm</span><span class="p">(</span><span class="n">observation_curu_layer1</span><span class="p">,</span> <span class="n">observation_curv_layer1</span><span class="p">,</span> <span class="n">observation_curw_layer1</span><span class="p">,</span>
                                        <span class="n">sim_curu_layer1</span><span class="p">,</span> <span class="n">sim_curv_layer1</span><span class="p">,</span>
                                        <span class="n">sim_curw_layer1</span><span class="p">)</span>

        <span class="n">sub_obj1</span> <span class="o">=</span> <span class="n">fn_layer1</span>

        <span class="sd">&quot;&quot;&quot; read the observation data and simulation result. An example that reading the velocity at sataion 2 layer 1&quot;&quot;&quot;</span>

        <span class="n">observation_curu_layer2</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">observation_curu</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">observation_curv_layer2</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">observation_curv</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">observation_curw_layer2</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">observation_curw</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sim_curu_layer2</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">sim_curu</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sim_curv_layer2</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">sim_curv</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sim_curw_layer2</span> <span class="o">=</span> <span class="n">postutil</span><span class="o">.</span><span class="n">read_simulation_data</span><span class="p">(</span><span class="n">sim_curw</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">fn_layer2</span> <span class="o">=</span> <span class="n">objfunc</span><span class="o">.</span><span class="n">fouriernorm</span><span class="p">(</span><span class="n">observation_curu_layer2</span><span class="p">,</span> <span class="n">observation_curv_layer2</span><span class="p">,</span> <span class="n">observation_curw_layer2</span><span class="p">,</span>
                                        <span class="n">sim_curu_layer2</span><span class="p">,</span> <span class="n">sim_curv_layer2</span><span class="p">,</span>
                                        <span class="n">sim_curw_layer2</span><span class="p">)</span>

        <span class="n">sub_obj2</span> <span class="o">=</span> <span class="n">fn_layer2</span>
        <span class="n">sub_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">sub_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_obj1</span><span class="p">)</span>
        <span class="n">sub_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_obj1</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> iteration </span><span class="si">%s</span><span class="s1"> evaluation: finished calculating the objection function&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">iterid</span><span class="p">,</span> <span class="n">simid</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">sub_objs</span>
</pre></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="example3.html" class="btn btn-neutral float-right" title="Optimize Delft-FLOW with Parallel DE" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="example2_1.html" class="btn btn-neutral" title="Single Objective Problem" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Xia Wei.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../_static/jquery.fancybox.min.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
  <script type="text/javascript">
    $(function(){
      $('.image-reference').fancybox();
    })
  </script>

</body>
</html>